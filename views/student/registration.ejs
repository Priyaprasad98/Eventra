<%- include('../partials/head') %>
</head>
<body class="bg-gray-50">
  <%- include('../partials/nav') %>

  <!-- Notification Toast -->
  <div id="notification" class="fixed top-5 right-5 z-50">
    <% if (query.status === 'success') { %>
      <div class="bg-green-100 border border-green-300 text-green-800 px-4 py-3 rounded-lg shadow-md animate-fade-in">
        Registration Successful!
      </div>
    <% } else if (query.status === 'already') { %>
      <div class="bg-yellow-100 border border-yellow-300 text-yellow-800 px-4 py-3 rounded-lg shadow-md animate-fade-in">
        You are already registered for this event.
      </div>
    <% } else if (query.status === 'error') { %>
      <div class="bg-red-100 border border-red-300 text-red-800 px-4 py-3 rounded-lg shadow-md animate-fade-in">
        Something went wrong. Please try again.
      </div>
    <% } %>
  </div>

  <section class="flex justify-center items-center pt-10 px-4">
    <div class="bg-white rounded-3xl shadow-lg max-w-lg w-full p-8 sm:p-10 mt-24">
      <h2 class="text-3xl font-bold text-gradient-to-r from-purple-500 to-indigo-500 mb-8 text-center">
        Event Registration
      </h2>

      <form action="/register/<%= event._id %>" method="POST" class="space-y-6">

        <!-- Student Name -->
        <div class="relative">
          <label for="studentName" class="block text-gray-700 font-medium mb-2">Full Name</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z"/>
              </svg>
            </span>
            <input type="text" name="studentName" id="studentName" 
                   class="w-full border border-gray-200 rounded-xl px-10 py-2 focus:outline-none focus:ring-2 focus:ring-purple-300 focus:border-transparent shadow-sm"
                   placeholder="Enter your full name" required>
          </div>
        </div>

        <!-- Email -->
        <div class="relative">
          <label for="studentEmail" class="block text-gray-700 font-medium mb-2">Email</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12H8m8-4H8m8 8H8m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
            </span>
            <input type="email" name="studentEmail" id="studentEmail" 
                   class="w-full border border-gray-200 rounded-xl px-10 py-2 focus:outline-none focus:ring-2 focus:ring-purple-300 focus:border-transparent shadow-sm"
                   placeholder="Enter your email" required>
          </div>
        </div>

        <!-- Phone Number -->
        <div class="relative">
          <label for="studentPhoneNo" class="block text-gray-700 font-medium mb-2">Phone Number</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2a1 1 0 011.11-.21 11.36 11.36 0 003.55.57 1 1 0 011 1v3.5a1 1 0 01-1 1A16 16 0 014 5a1 1 0 011-1h3.5a1 1 0 011 1 11.36 11.36 0 00.57 3.55 1 1 0 01-.21 1.11l-2.24 2.13z"/>
              </svg>
            </span>
            <input type="tel" name="studentPhoneNo" id="studentPhoneNo" 
                   class="w-full border border-gray-200 rounded-xl px-10 py-2 focus:outline-none focus:ring-2 focus:ring-purple-300 focus:border-transparent shadow-sm"
                   placeholder="Enter your phone number" required>
          </div>
        </div>

        <!-- Department -->
        <div class="relative">
          <label for="studentDepartment" class="block text-gray-700 font-medium mb-2">Department</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 14l9-5-9-5-9 5 9 5zm0 0v6m0 0H6m6 0h6"/>
              </svg>
            </span>
            <select name="studentDepartment" id="studentDepartment" 
                    class="w-full border border-gray-200 rounded-xl px-10 py-2 focus:outline-none focus:ring-2 focus:ring-purple-300 focus:border-transparent shadow-sm"
                    required>
              <option value="" disabled selected>Select your department</option>
              <option value="CSE">CSE</option>
              <option value="BCA">BCA</option>
              <option value="ECE">ECE</option>
              <option value="IT">IT</option>
            </select>
          </div>
        </div>

        <!-- Submit Button -->
        <div class="text-center">
          <button type="submit" 
                  class="bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white font-semibold px-8 py-3 rounded-xl shadow-lg transition-all duration-300 ease-in-out flex items-center justify-center gap-2 mx-auto">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v6m3-3h-6M9 11a4 4 0 100-8 4 4 0 000 8zm0 2a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6z"/>
            </svg>
            Register Now
          </button>
        </div>

      </form>
    </div>
  </section>

  <script>
    const notification = document.getElementById('notification');
    if(notification) {
      setTimeout(() => {
        notification.classList.add('opacity-0', 'transition', 'duration-500', 'ease-out');
        setTimeout(() => notification.remove(), 500);
      }, 3000); // show for 3 seconds
    }
  </script>
</body>
</html>
